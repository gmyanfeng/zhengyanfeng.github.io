<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Swift 和 Objective-C 的对比 | Fat Panda</title>
<link rel="shortcut icon" href="https://zhengyanfeng.github.io/favicon.ico?v=1578639222897">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zhengyanfeng.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://zhengyanfeng.github.io">
  <img class="avatar" src="https://zhengyanfeng.github.io/images/avatar.png?v=1578639222897" alt="">
  </a>
  <h1 class="site-title">
    Fat Panda
  </h1>
  <p class="site-description">
    学而时习之
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/zhengyanfeng" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
        <a href="https://twitter.com/awesomeyanfeng" target="_blank">
          <i class="fab fa-twitter"></i>
        </a>
      
    
      
        <a href="https://www.weibo.com/2309146301/profile?is_hot=1" target="_blank">
          <i class="fab fa-weibo"></i>
        </a>
      
    
      
    
      
    
  </div>
</div>


        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Swift 和 Objective-C 的对比
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2019-09-19 ·
              </time>
              
            </div>
            
            <div class="post-content">
              <p>Swift，苹果于2014年 WWDC（苹果开发者大会）发布的新开发语言（已开源），可与 Objective-C 共同运行于 macOS 和 iOS 平台，用于搭建基于苹果平台的应用程序。</p>
<!-- more -->
<h2 id="11-共同点">1.1 共同点</h2>
<ol>
<li>OC 出现过的绝大多数概念，比如引用计数、ARC（自动引用计数）、属性、协议、接口、初始化、扩展类、命名参数、匿名函数等，在 Swift 中继续有效（可能最多换个术语）。</li>
<li>Swift 和 Objective-C 共用一套运行时环境，Swift 的类型可以桥接到Objective-C（下面我简称OC）。</li>
</ol>
<h2 id="12-swift-的优点">1.2 Swift 的优点</h2>
<ul>
<li>Swift 注重安全，OC 注重灵活</li>
<li>Swift 注重面向协议编程、函数式编程、面向对象编程，OC注重面向对象编程</li>
<li>Swift 注重值类型，OC注重指针和引用</li>
<li>Swift 是静态类型语言，OC 是动态类型语言</li>
<li>Swift 的文件结构和语法比较简化</li>
<li>Swift 的支持的泛型类型更加广泛，OC 只能用于集合类型</li>
<li>Swift 中有方便快捷的高阶函数（函数式编程） (Swift的标准数组支持三个高阶函数：map，filter 和 reduce,以及 map 的扩展 flatMap)</li>
<li>Swift 新增了两种权限，细化权限。open &gt; public &gt; internal(默认) &gt; fileprivate &gt; private</li>
<li>Swift中独有的元组类型(tuples)，把多个值组合成复合值。元组内的值可以是任何类型，并不要求是相同类型的</li>
</ul>
<h2 id="13-swift-的不足">1.3 Swift 的不足</h2>
<ul>
<li>版本不稳定</li>
<li>语法的规范太多样</li>
</ul>
<h2 id="2-swift-类class和结构体struct的区别">2 Swift 类（Class）和结构体（Struct）的区别</h2>
<figure data-type="image" tabindex="1"><img src="https://zhengyanfeng.github.io/post-images/1568854340169.png" alt="class_struct_different" loading="lazy"></figure>
<h3 id="21-值和引用类型">2.1 值和引用类型</h3>
<ul>
<li>结构体 struct 和枚举 enum 是值类型，类 class 是引用类型。</li>
<li>String, Array和 Dictionary都是结构体，因此赋值直接是拷贝，而NSString, NSArray 和NSDictionary则是类，所以是使用引用的方式。</li>
<li>struct 比 class 更“轻量级”，struct 分配在栈中，class 分配在堆中。</li>
</ul>
<h3 id="22-指针">2.2 指针</h3>
<p>一个 Swift 常量或者变量引用一个引用类型的实例与 C 语言中的指针类似，不同的是并不直接指向内存中的某个地址，而且也不要求你使用星号（*）来表明你在创建一个引用。Swift 中这些引用与其它的常量或变量的定义方式相同。</p>
<h3 id="23-类和结构体">2.3 类和结构体</h3>
<blockquote>
<p>使用struct：任何情况下，优先考虑使用struct，如果满足不了，再考虑class</p>
</blockquote>
<ul>
<li>数据在多线程中使用，而且数据没有使用 class 的必要性，就使用struct</li>
<li>希望实例在 copy 后不受新实例的影响</li>
</ul>
<blockquote>
<p>使用 class</p>
</blockquote>
<ul>
<li>需要继承</li>
<li>在递归调用的时候（如链表的实现，node 使用的是 class 而不是 struct）</li>
<li>属性数据复杂</li>
<li>要使用引用的时候</li>
</ul>
<h2 id="3objective-c中的protocol与swift中的protocol的区别">3.Objective-C中的protocol与Swift中的protocol的区别</h2>
<p>相比于OC，Swift 可以做到protocol协议方法的具体默认实现（通过extension）相比多态更好的实现了代码复用，而 OC 则不行</p>
<h2 id="4面向协议面向接口与面向对象的区别">4.面向协议（面向接口）与面向对象的区别</h2>
<blockquote>
<p>面向对象和面向协议的的最明显区别是对抽象数据的使用方式，面向对象采用的是继承，而面向协议采用的是遵守协议。在面向协议设计中，Apple建议我们更多的使用 值类型 （struct）而非 引用类型 （class）。有一个很好的例子说明了面向协议比面向对象更符合某些业务需求。其中有飞机、汽车、自行车三种交通工具（均继承自父类交通工具）；老虎、马三种动物（均继承父类自动物）；在古代马其实也是一种交通工具，但是父类是动物，如果马也有交通工具的功能，则：如果采用面向对象编程，则需要既要继承动物，还要继承交通工具，但是父类交通工具有些功能马是不需要的。由此可见继承，作为代码复用的一种方式，耦合性还是太强。事物往往是一系列特质的组合，而不单单是以一脉相承并逐渐扩展的方式构建的。以后慢慢会发现面向对象很多时候其实不能很好地对事物进行抽象。</p>
</blockquote>
<figure data-type="image" tabindex="2"><img src="https://zhengyanfeng.github.io/post-images/1568857277470.png" alt="" loading="lazy"></figure>
<p>如果采用面向协议编程，马只需要实现出行协议就可以拥有交通工具的功能了。面向协议就是这样的抽离方式，更好的职责划分，更加具象化，职责更加单一。很明显面向协议的目的是为了降低代码的耦合性。</p>
<figure data-type="image" tabindex="3"><img src="https://zhengyanfeng.github.io/post-images/1568857305826.png" alt="" loading="lazy"></figure>
<p>面向协议相对于面向对象来说更具有可伸缩性和可重用性，并且在编程的过程中更加模块化，通过协议以及协议扩展替代一个庞大的基类，这在大规模系统编程中会有很大的便捷之处。</p>
<h3 id="面向对象的特点">面向对象的特点</h3>
<ul>
<li>封装：数据封装、访问控制、隐藏实现细节、类型抽象为类，代码以逻辑关系组织到一起，方便阅读，高内聚、低耦合的系统结构</li>
<li>继承：代码重用，继承关系，更符合人类思维</li>
<li>多态：接口重用，父类指针能够指向子类对象当父类的引用指向子类对象时，就发生了向上转型，即把子类类型对象转成了父类类型。向上转型的好处是隐藏了子类类型，提高了代码的扩展性</li>
</ul>
<p>多态的不足</p>
<ul>
<li>父类有部分public方法是子类不需要的，也不允许子类覆盖重写</li>
<li>父类有一些方法是必须要子类去覆盖重写的，在父类的方法其实也是一个空方法</li>
<li>父类的一些方法即便被子类覆盖重写，父类原方法还是要执行的</li>
<li>父类的一些方法是可选覆盖重写的，一旦被覆盖重写，则以子类为准</li>
</ul>

            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://zhengyanfeng.github.io/post/markdown-cheatsheet-cun-dang">
              <h3 class="post-title">
                Markdown Cheatsheet 存档
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '602216f311fac9383a87',
    clientSecret: '6284ed4af0af2547c053a4dd8e71a5783b4c3569',
    repo: 'zhengyanfeng.github.io',
    owner: 'zhengyanfeng',
    admin: ['zhengyanfeng'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://zhengyanfeng.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
